 <!DOCTYPE html>
<html lang="en">
<head>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-96632957-1', 'auto');
  ga('send', 'pageview');

</script>
  <title>Couverture médiatique de la campagne électorale présidentielle 2017</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!--Mots clés pour les moteurs de recherche-->
  <meta name="description" content="Traitement médiatique de la campgane électorale">
  <meta name="keywords" content="dataviz, Fillon, Macron, Le pen, Hammon, mélenchon,presse, politique, candidats, campgagne électorale">
  <meta name="author" content="PRESSE ET POLITIQUE">
  <meta charset="utf-8">
  <!-- Indexation moteurs de recherche -->
  <meta name="robots" content="index, nofollow">
  <meta name="googlebot" content="index, nofollow">
  <!-- Encoding -->
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <!--Marche bien sur les téléphones-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet"/>
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet"/>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script src="https://code.highcharts.com/highcharts.js"></script>
  <script src="https://code.highcharts.com/modules/data.js"></script>
  <script src="https://code.highcharts.com/modules/drilldown.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>





  <link rel="stylesheet" type="text/css" href="style.css">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
</head>
<body id="myPage" data-spy="scroll" data-target=".navbar" data-offset="60">
 <nav class="navbar navbar-default navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>

    <div class="collapse navbar-collapse" id="myNavbar">
      <a class="navbar-brand" href="#">Home</a>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="#gr1">Graphe 1</a></li>
        <li><a href="#gr2">Graphe 2</a></li>
        <li><a href="#gr3">Graphe 3</a></li>
        <li><a href="#gr4">Graphe 4</a></li>
        <li><a href="#gr5">Graphe 5</a></li>
        <li><a href="#footer">A propos
      <span class="mega-octicon octicon-person"></span>
        </a></li>
      </ul>
    </div>
</nav>

<div class="jumbotron text-center">
  <h2 class="titre"> Couverture médiatique de la campagne électorale : </h2>
  <h3 class="titre"> Le Monde, Le Figaro, Libération, L'Express,le JDD et L’Obs : 6 quotidiens passés au crible</h3>
</div>

<div class="img-nav">
</div>

<div class = "intro">
<h2>Présentation des journaux passés en revue</h2>
  <p>Pour analyser le traitement médiatique de la campagne électorale depuis le début de l'année 2017,
    Nous nous sommes focalisés sur 6 des journaux les plus importants en termes de volume de tirage annuel.
  </p></div>

<div class = "intro-img">

<img id="monde" src="img/monde.jpeg" class='image'>
<img id = "figaro" src="img/figaro.png" class='image'>
<img src="img/liberation.jpeg" class='image'>
<img src="img/express.jpeg" class='image'>
<img src="img/jdd.jpeg" class='image'>
<img src="img/obs.jpeg" class='image'>
</div>


<div class = "intro-text">

<p class = "hover-text">Fondé en 1944, Le Monde est un des derniers grands quotidiens dits « du soir ». Journal de référence traitant essentiellement l’actualité politique, internationale et économique, il revendique une ligne éditoriale non partisane, bien que celle-ci est parfois considérée comme étant de centre gauche (mais démentie par la rédaction). Son lectorat est par ailleurs considéré comme étant majoritaire à gauche. En France, Le Monde possède un tirage annuel d’environ 82 millions de journaux en 2016. <br> Propriétaires : Pierre Bergé, Xavier Niel et Matthieu Pigasse</p>

<p class = "hover-text">Le Figaro : Fondé en 1826, Le Figaro est un quotidien généraliste dont la ligne éditoriale est considérée appartenant au courant politique de la droite gaulliste et conservatrice. Son lectorat se situe majoritairement à la droite de l’échiquier politique Français. Son tirage annuel est d’environ 94 millions de journaux en 2016. <br>Propriétaire : Groupe Dassault
</p>
<p class = "hover-text">Fondé en 1973, Libération est un quotidien généraliste matinal dont la ligne éditoriale est aujourd’hui considérée comme étant sociale-démocrate (même si elle fut d’extrême-gauche à sa création). Son lectorat se situe majoritairement à gauche, et son tirage annuel est d’environ 29 millions de journaux en 2016. <br>Actionnaires principaux : Bruno Ledoux et Patrick Drahi

</p>
<p class = "hover-text">L’Express : Fondé en 1953, L'Express est un hebdomadaire de ligne éditoriale libérale et centre gauche (à sa fondation, le journal était considéré comme anti-gaulliste et atlantiste), et traite essentiellement des thématiques politiques et économiques. Aucune information n’est disponible sur l’opinion politique majoritaire du lectorat de l’Express. Son tirage annuel est de 14 millions d’exemplaires en 2016. <br>Propriétaires : Patrick Drahi et Marc Laufer

</p>
<p class = "hover-text">Le Journal du Dimanche : Fondé en 1948, le JDD est le seul hebdomadaire dominical, et traite essentiellement les thématiques politiques. Il ne dispose pas d’une ligne éditoriale particulièrement partisane. De nombreux « scoops » et « scandales » sont ainsi révélés par ce journal, qui publie par ailleurs de nombreux entretiens avec des personnalités politiques de premier plan. Son tirage annuel est d’environ 11 millions d’exemplaires en 2016. <br>Propriétaire : Lagardère Active (pôle presse et audiovisuel du groupe industriel Lagardère).

</p>
<p class = "hover-text">L’Obs : Fondé en 1964 et anciennement appelé Le Nouvel Observateur, L’Obs est un hebdomadaire d’information généraliste de ligne éditoriale considérée à gauche, et de lectorat majoritairement à gauche. Son tirage annuel est de 22 millions d’exemplaires en 2016. <br>Propriétaires : Pierre Bergé, Xavier Niel, Matthieu Pigasse, et le Groupe Perdriel.

</p>


</div>




<div id="gr1" class="container-fluid"  >
  <h2> Volume d'articles publiés sur les 5 favoris depuis janvier 2017 </h2>
  <div id="container0" style="min-width: 310px; max-width: 700px; height: 400px; margin: 0 auto"></div>
  <div class = "text1">Haec et huius modi quaedam innumerabilia ultrix facinorum impiorum bonorumque praemiatrix aliquotiens operatur Adrastia atque utinam semper quam vocabulo duplici etiam Nemesim appellamus: ius quoddam sublime numinis efficacis, humanarum mentium opinione lunari circulo superpositum, vel ut definiunt alii, substantialis tutela generali potentia partilibus praesidens fatis, quam theologi veteres fingentes Iustitiae filiam ex abdita quadam aeternitate tradunt omnia despectare terrena.</div>
</div>

<div id = "frame"
    role = "content" >
</div>
<div id="gr2" class="container-fluid">

  <h2>Comparez la cote des candidats au sein de chaque journal:</h2>
  <h4>Comparez la cote des candidats au sein de chaque journal</h4>

  <div class="row">
    <div class="col-sm-3">
  <select id="candidat1"  class=form-control>
    <option value="select">Choississez un candidat</option>
    <option value="Fillon">Fillon</option>
    <option  value="Mélenchon">Mélenchon </option>
    <option value="LePen">LePen</option>
    <option value="Hamon">Hamon</option>
    <option value="Macron">Macron</option>
  </select>
  </div>
  <div class="col-sm-3">
  <strong> Versus</strong>
  </div>
  <div class="col-sm-4">
  <select id="candidat2"  class=form-control>
    <option value="select">Choississez un autre candidat</option>
    <option value="Fillon">Fillon</option>
    <option value="Mélenchon">Mélenchon</option>
    <option value="LePen">LePen</option>
    <option value="Hamon">Hamon</option>
    <option value="Macron">Macron</option>
  </select>
</div>
</div>
  <!--Candidat1=LEPEN-->
  <div class="row">
  <div class="result" data-candidat1="LePen" data-candidat2="Fillon"> LePen VS Fillon</div>
  <div class="result" data-candidat1="LePen" data-candidat2="Mélenchon"> LePen VS Mélenchon</div>
  <div class="result" data-candidat1="LePen" data-candidat2="Hamon"> LePen VS Hamon</div>
  <div class="result" data-candidat1="LePen" data-candidat2="Macron"> LePen VS Macron</div>
  <!--Candidat1=Macron-->
  <div class="result" data-candidat1="Macron" data-candidat2="Fillon"> Macron VS Fillon</div>
  <div class="result" data-candidat1="Macron" data-candidat2="Mélenchon"> Macron VS Mélenchon</div>
  <div class="result" data-candidat1="Macron" data-candidat2="Hamon"> Macron VS Hamon</div>
  <div class="result" data-candidat1="Macron" data-candidat2="LePen"> Macron VS LePen</div>
  <!--Candidat1=Hamon-->
  <div class="result" data-candidat1="Hamon" data-candidat2="Fillon"> Hamon VS Fillon</div>
  <div class="result" data-candidat1="Hamon" data-candidat2="Mélenchon"> Hamon VS Mélenchon</div>
  <div class="result" data-candidat1="Hamon" data-candidat2="Macron"> Hamon VS Macron</div>
  <div class="result" data-candidat1="Hamon" data-candidat2="LePen">Hamon VS LePen</div>
  <!--Candidat1=Mélenchon-->
  <div class="result" data-candidat1="Mélenchon" data-candidat2="Fillon"> Mélenchon VS Fillon</div>
  <div class="result" data-candidat1="Mélenchon" data-candidat2="Hamon"> Mélenchon VS Hamon</div>
  <div class="result" data-candidat1="Mélenchon" data-candidat2="Macron"> Mélenchon VS Macron</div>
  <div class="result" data-candidat1="Mélenchon" data-candidat2="LePen">Mélenchon VS LePen</div>
  <!--Candidat1=Fillon-->
  <div class="result" data-candidat1="Fillon" data-candidat2="Hamon"> Fillon VS Hamon</div>
  <div class="result" data-candidat1="Fillon" data-candidat2="Mélenchon"> Fillon VS Mélenchon</div>
  <div class="result" data-candidat1="Fillon" data-candidat2="Macron"> Fillon VS Mélenchon</div>
  <div class="result" data-candidat1="Fillon" data-candidat2="LePen">Fillon VS LePen</div>
  </div>
  <script>
    $('#candidat1, #candidat2').on('change', function() {
      // set reference to select elements
      var candidat1 = $('#candidat1');
      var candidat2 = $('#candidat2');
      if (candidat1.val() == 'select' || candidat2.val() == 'select') {
        $('.result.active').removeClass('active');
      }
      // check if user has made a selection on both dropdowns
      if (candidat1.prop('selectedIndex') > 0 && candidat2.prop('selectedIndex') > 0) {
        // remove active class from current active div element
        $('.result.active').removeClass('active');

        // get all result divs, and filter for matching data attributes
        $('.result').filter('[data-candidat1="' + candidat1.val() + '"][data-candidat2="' + candidat2.val() + '"]').addClass('active');
      }
    });

  </script>


</div>

<div id="gr3" class="container-fluid">
  <h2>Graphe 3</h2>
  <h4>Lorem ipsum..</h4>
  <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
  tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
  quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
  consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
  cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
  proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
  <div id="container" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
</div>

<div id="gr4" class="container-fluid bg-grey">
  <h2>Graphe 4</h2>
  <h4><strong>MISSION:</strong> Our mission lorem ipsum..</h4>
  <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
  tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
  quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
  consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
  cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
  proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
  <div id='highcharts-avigowi'><script src='//cloud.highcharts.com/inject/avigowi' defer='defer'></script></div>
</div>


<div id="gr5" class="container-fluid">
  <h2>Graphe 5</h2>
  <h4>Lorem ipsum..</h4>
  <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
  tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
  quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
  consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
  cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
  proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
  <!--<div id='highcharts-emibiba'><script src='//cloud.highcharts.com/inject/emibiba' defer='defer'></script></div>-->
  <div id="repartition" style="min-width: 310px; max-width: 600px; height: 400px; margin: 0 auto"></div>
</div>

<div class="fleche"> <a href="#myPage" title="To Top">
        <span class="glyphicon glyphicon-chevron-up"></span></a>
</div>

<div id="footer" class="footer container-fluid">
<div class="container mini-section">
  <div class="row">
    <div class="col-sm-3">
      <div class="foot-header"> Nous sommes 4 étudiants ingénieurs Datascientists en fin de formation à l'ENSAE Paristech.
        Ce site a été réalisé dans le cadre d'un projet de <em> Datavisualisation </em> (2017) et ne reflète aucunement l'opinion de l'ENSAE Paristech.
         Vous pouvez accéder une analyse plus détaillée de ce sujet sur le
        <a href="https://amartincontemporary.wordpress.com/"> blog d'Antoine Martin</a>
         <a href="http://www.ensae.fr/">
         <img src="img/ensae_logo_dev.png" alt="ENSAE PARISTECH" height="170" width="300"></div>
         </a>
      <div class="foot-links">
      </div>
    </div>
      <div class="col-sm-3">

        <div class="foot-links">
          <div>
          <a href="https://www.linkedin.com/in/kentaquereburu/">Kent AQUEREBURU
          <a href="https://www.linkedin.com/in/kentaquereburu/"><i class="fa fa-linkedin"></i></a>
          <a href="#"><i class="fa fa-twitter"></i></a>
          </a>
          </div>
          <a href="#">Antoine MARTIN
          <a href="#"><i class="fa fa-linkedin"></i></a>
          <a href="#"><i class="fa fa-twitter"></i></a>
          </a>
          <div>
          <a href="#">Emiliano HARRIS
          <a href="#"><i class="fa fa-linkedin"></i></a>
          <a href="#"><i class="fa fa-twitter"></i></a>
          </a>
          </div>
          <div>
          <a href="#">Benoit ROBAGLIA
          <a href="#"><i class="fa fa-linkedin"></i></a>
          <a href="#"><i class="fa fa-twitter"></i></a>
          </a>
          </div>

        </div>
      </div><!--/col-sm-3-->
      <div class="col-sm-3"> <strong> Données et Méthodologie : </strong>

      Les données utilisées par ce site ont été collectées sur une période de 3 mois sur les sites des différents quotidiens analysés.
        </div>
    <div class="col-sm-3">


    </div><!--/col-sm-3-->


  	</div><!--/row-->
<!--/container-->
</div><!--/footer--></div>




<script src="script.js" type="text/javascript" ></script>
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>

<script>Highcharts.chart('container0', {
    chart: {
        type: 'bar'
    },
    title: {
        text: "Volume d'articles pour les 5 favoris"
    },

    xAxis: {
        categories: ['Fillon', "Macron",'Hamon', 'Le Pen', 'Mélenchon'],
        title: {
            text: null
        }
    },
    yAxis: {
        min: 0,
        title: {
            text: "Nombre d'articles publiés",
            align: 'high'
        },
        labels: {
            overflow: 'justify'
        }
    },
    tooltip: {
        valueSuffix: ' articles'
    },
    plotOptions: {
        series: {
                        colorByPoint: true
                    }

    },

    colors: ['#4572A7', '#AA4643', '#89A54E', '#80699B', '#3D96AE'],

    credits: {
        enabled: false
    },
    series: [{
        name: "Couverture médiatique depuis début 2017",
        data: [2622,1730,1510,1150,674]
    }]
});</script>

<script>Highcharts.chart('container', {
    chart: {
        type: 'spline'
    },
    title: {
        text: 'Traitement médiatique du Figaro'
    },
    subtitle: {
        text: "Proportion d'articles sortis par semaine"
    },
    xAxis: {
        title:{
          text: "Semaine de 2017"
        },
        categories: ['1', '2', '3', '4', '5', '6',
            '7', '8', '9', '10', '11', '12']
    },
    yAxis: {
        title: {
            text: "Volume d'articles"
        }
    },
    tooltip: {
        pointFormat : "{series.name}: <b>{point.y}</b><br/>",
        crosshairs: true,
        shared: true
    },
    plotOptions: {
        spline: {
            marker: {
                radius: 4,
                lineColor: '#666666',
                lineWidth: 1
            }
        }
    },
    series: [{
        name: 'Fillon',
        marker: {
            symbol: 'square'
        },

        data: [2,2,{
            y: 3, //Pour l'endroit où mettre l'étoile. Le mettre là où on veut attention.
            marker: {
                symbol: 'url(img/explosion.png)',
                label: "gsgse"}
                },6,17,13,14,6,30,28,26,5],
                color : "#4169E1"

    },

    {
        name: 'Hamon',
        marker: {
            symbol: 'circle'
        },
        data: [3,5,5,20,24,14,14,22,13,27,28,16],
        color : "#008000"
    },

    {
        visible : false,
        name: 'Le Pen',
        marker: {
            symbol: 'triangle'
        },
        data: [4,0,9,4,14,16,12,31,26,24,12,18],
        color : "#00008B"
    },

    {
        visible : false,
        name: 'Macron',
        marker: {
            symbol: 'diamond'
        },
        data: [ 3,3,5,1,10,8,22,35,29,13,24,12],
        color : "#FFA500",
    },

    {
        visible : false,
        name: 'Mélenchon',
        marker: {
            symbol: 'diamond'
        },
        data: [7,6,3,8,14,17,7,24,5,9,24,4],
        color:"#FF0000"
    }
    ]
});
 </script>
 <script>
 // Create the chart
Highcharts.chart('repartition', {
  chart: {
    type: 'pie'
  },
  title: {
    text: 'Répartition des 5 candidats favoris au sein de chaque quotidien'
  },
  subtitle: {
    text: 'Le Monde'
  },
  plotOptions: {
    series: {
      dataLabels: {
        enabled: true,
        format: '{point.name}: {point.y:.1f}%'
      }
    }
  },

  tooltip: {
    headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
    pointFormat: '<span style="color:{point.color}">{point.name}</span>: <b>{point.y:.2f}%</b> <br/>'
  },
  series: [{
    name: 'Proportion d\'articles consacré au candidat ',
    colorByPoint: true,
    data: [{
      name: 'Fillon',
      y: 56.33,
      drilldown: 'Fillon'
    }, {
      name: 'LePen',
      y: 24.03,
      drilldown: 'LePen'
    }, {
      name: 'Hamon',
      y: 10.38,
      drilldown: 'Hamon'
    }, {
      name: 'Macron',
      y: 4.77,
      drilldown: 'Macron'
    }, {
      name: 'Mélenchon',
      y: 0.91,
      drilldown: 'Mélenchon',
      color: 'red'
    }]
  }],

});
</script>
<script>
var quiztitle = "Les journaux ont t-ils un candidat préféré?";


var quiz = [
       {
           "question" : "Q1: Lequel des 5 favoris a été le plus couvert par Le Monde?",
           "image" : "img/monde.jpeg",
           "choices" : [
                                   "Fillon",
                                   "Macron",
                                   "Hamon",
                                   "Mélenchon",
                                   "Lepen",
                                   "Les 5 candidats favoris ont reçu une couverture semblable"
                               ],
           "correct" : "Fillon",
           "explanation" : "Fillon réprésente en effet à lui seul 38% des articles du Monde depuis le début de l'année",
       },
       {
           "question" : "Q1: Lequel des 5 favoris a été le plus couvert par Le Figaro",
           "image" : "img/figaro.jpeg",
           "choices" : [
                                   "Thomas Jefferson",
                                   "Dwight D. Eisenhower",
                                   "Benjamin Franklin",
                                   "Abraham Lincoln"
                               ],
           "correct" : "Thomas Jefferson",
           "explanation" : "The two dollar bill is seldom seen in circulation. As a result, some businesses are confused when presented with the note.",
       },
       {
           "question" : "LeQuel des 5 candidats a le plus couvert selon vous au sein du journal Le Monde?",
           "image" : "",
           "choices" : [
                                   "First manned flight",
                                   "California became a state",
                                   "American Civil War began",
                                   "Declaration of Independence"
                               ],
           "correct" : "American Civil War began",
           "explanation" : "South Carolina came under attack when Confederate soldiers attacked Fort Sumter. The war lasted until April 9th 1865.",
       },


   ];


var currentquestion = 0,
    score = 0,
    submt = true,
    picked;

    $(document).ready(function(){
      $("#submitbutton").hide();

    function htmlEncode(value) {
        return $(document.createElement('div')).text(value).html();
    }


    function addChoices(choices) {
        if (typeof choices !== "undefined" && $.type(choices) == "array") {
            $('#choice-block').empty();
            for (var i = 0; i < choices.length; i++) {
                $(document.createElement('li')).addClass('choice choice-box').attr('data-index', i).text(choices[i]).appendTo('#choice-block');
            }
        }
    }

    function nextQuestion() {
        submt = true;
        alert("nQ");
        $('#explanation').empty();
        $('#question').text(quiz[currentquestion]['question']);
        $('#pager').text('Question ' + Number(currentquestion + 1) + ' of ' + quiz.length);
        if (quiz[currentquestion].hasOwnProperty('image') && quiz[currentquestion]['image'] != "") {
            if ($('#question-image').length == 0) {
                $(document.createElement('img')).addClass('question-image').attr('id', 'question-image').attr('src', quiz[currentquestion]['image']).attr('alt', htmlEncode(quiz[currentquestion]['question'])).insertAfter('#question');
            } else {
                $('#question-image').attr('src', quiz[currentquestion]['image']).attr('alt', htmlEncode(quiz[currentquestion]['question']));
            }
        } else {
            $('#question-image').remove();
        }
        addChoices(quiz[currentquestion]['choices']);
        setupButtons();


    }


    function processQuestion(choice) {
        //alert(choice);
        currentquestion++;
         //alert(currentquestion);
        $("#submitbutton").hide();

            if (currentquestion == quiz.length) {
                endQuiz();
            } else {

                nextQuestion();
            }

    }


    function setupButtons() {
        $('.choice').on('mouseover', function () {
            $(this).css({
                'background-color': '#e1e1e1'
            });
        });
        $('.choice').on('mouseout', function () {
            $(this).css({
                'background-color': '#fff'
            });
        })
        $('.choice').on('click', function () {
            //alert("");
            choice = $(this).attr('data-index');
            $('.choice').removeAttr('style').off('mouseout mouseover');
            $(this).css({
                'border-color': '#222',
                'font-weight': 700,
                'background-color': '#c1c1c1'
            });
            if (quiz[currentquestion]['choices'][choice] == quiz[currentquestion]['correct']) {
            $('.choice').eq(choice).css({
                'background-color': '#50D943'
            });
            $('#explanation').html('<strong>Correct!</strong> ' + htmlEncode(quiz[currentquestion]['explanation']));
            score++;
        } else {
            $('.choice').eq(choice).css({
                'background-color': '#D92623'
            });
            $('#explanation').html('<strong>Incorrect.</strong> ' + htmlEncode(quiz[currentquestion]['explanation']));
        }
               $("#submitbutton").show();
            if (submt) {
                alert("submit");
                submt = false;
                $('#submitbutton').css({
                    'color': '#000'

                });
                $("#submitbutton").click(function(){
                  //alert("click");
                     $('.choice').off('click');
                    $(this).off('click');
                    processQuestion(choice);
                });
            }
        })
    }


    function endQuiz() {
        $('#explanation').empty();
        $('#question').empty();
        $('#choice-block').empty();
        $('#submitbutton').remove();
        $('#question').text("You got " + score + " out of " + quiz.length + " correct.");
        $(document.createElement('h2')).css({
            'text-align': 'center',
            'font-size': '4em'
        }).text(Math.round(score / quiz.length * 100) + '%').insertAfter('#question');
    }


    function init() {
        //add title
        if (typeof quiztitle !== "undefined" && $.type(quiztitle) === "string") {
            $(document.createElement('h1')).text(quiztitle).appendTo('#frame');
        } else {
            $(document.createElement('h1')).text("Quiz").appendTo('#frame');
        }

        //add pager and questions
        if (typeof quiz !== "undefined" && $.type(quiz) === "array") {
            //add pager
            $(document.createElement('p')).addClass('pager').attr('id', 'pager').text('Question 1 of ' + quiz.length).appendTo('#frame');
            //add first question
            $(document.createElement('h2')).addClass('question').attr('id', 'question').text(quiz[0]['question']).appendTo('#frame');
            //add image if present
            if (quiz[0].hasOwnProperty('image') && quiz[0]['image'] != "") {
                $(document.createElement('img')).addClass('question-image').attr('id', 'question-image').attr('src', quiz[0]['image']).attr('alt', htmlEncode(quiz[0]['question'])).appendTo('#frame');
            }
            $(document.createElement('p')).addClass('explanation').attr('id', 'explanation').html('&nbsp;').appendTo('#frame');

            //questions holder
            $(document.createElement('ul')).attr('id', 'choice-block').appendTo('#frame');

            //add choices
            addChoices(quiz[0]['choices']);

            //add submit button
            $(document.createElement('div')).addClass('choice-box').attr('id', 'submitbutton').text('Check Answer').css({
                'font-weight': 700,
                'color': '#222',
                'padding': '30px 0',
             }).appendTo('#frame');


          $("#submitbutton").hide();
            setupButtons();
        }
    }

    init();
});
</script>


</body>
</html>
